"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var ASC="ASC",DESC="DESC",Fn=function(){function n(){var u=this;_classCallCheck(this,n),this.addSortEventListener=function(){document.querySelector("#phone-number").addEventListener("click",u.sortNumbers)},this.onLoad=function(){document.querySelector(".form").addEventListener("submit",u.generatePhoneNumbers),u.addSortEventListener()},this.generatePhoneNumbers=function(e){e.preventDefault();var t=document.querySelector(".num-input").value;n.validateInput(t)&&(n.makeRequest("POST","/generate/".concat(t),u.afterPhoneNumbersGen),u.delayButtonUpdate())},this.afterPhoneNumbersGen=function(e){u.updateView(e),u.showToast("Number generated")()},this.sortNumbers=function(){u.sortIn=u.sortIn===ASC?DESC:ASC,n.makeRequest("GET","/sort/".concat(u.sortIn),u.updateView)},this.showToast=function(e){var t=document.querySelector(".toast"),n=document.querySelector(".toast-text");return t.classList.add("toast--show"),n.innerHTML=e,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2e3;clearTimeout(u.toastTimeout),u.toastTimeout=setTimeout(function(){t.classList.remove("toast--show"),n.innerHTML=""},e)}},this.updateView=function(e){var t=e.responseText,n=e.status;clearTimeout(u.timeout);var o=document.querySelector(".table-container"),r=document.querySelector("body"),i=document.querySelector(".num-input"),s=document.querySelector(".c-btn");(200===n?o:r).innerHTML=t,i.value="",u.addSortEventListener(),u.buttonText&&(s.classList.remove("c-btn--disable"),s.innerHTML=u.buttonText)},this.sortIn=ASC}return _createClass(n,[{key:"delayButtonUpdate",value:function(){var e=document.querySelector(".c-btn");this.buttonText=document.querySelector(".c-btn").innerHTML,this.timeout=setTimeout(function(){e.classList.add("c-btn--disable"),e.innerHTML="Generating numbers..."},100)}}],[{key:"validateInput",value:function(e){var t=document.querySelector(".help-text");return e<1||500<e?!(t.style.visibility="visible"):(t.style.visibility="hidden",!0)}},{key:"makeRequest",value:function(e,t,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===this.readyState&&n(this)},o.open(e,t,!0),o.send()}}]),n}(),fn=new Fn;window.addEventListener("load",fn.onLoad,!1),window&&window.testEnv&&(module.exports=Fn);